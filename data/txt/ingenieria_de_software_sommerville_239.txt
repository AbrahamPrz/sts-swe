222  Capítulo 8 ■ Pruebas de software  En la figura 8.9 se ilustra el proceso TDD fundamental. Los pasos en el proceso son  los siguientes: 1. Se comienza por identificar el incremento de funcionalidad requerido. Éste usual- mente debe ser pequeño y aplicable en pocas líneas del código. 2. Se escribe una prueba para esta funcionalidad y se implementa como una prueba automatizada. Esto significa que la prueba puede ejecutarse y reportarse, sin impor-tar si aprueba o falla. 3. Luego se corre la prueba, junto con todas las otras pruebas que se implementaron. Inicialmente, no se aplica la funcionalidad, de modo que la nueva prueba fallará. Esto es deliberado, pues muestra que la prueba añade algo al conjunto de pruebas. 4. Luego se implementa la funcionalidad y se opera nuevamente la prueba. Esto puede incluir la refactorización del código existente, para perfeccionarlo y adicionar nuevo código a lo ya existente. 5. Una vez puestas en funcionamiento con éxito todas las pruebas, se avanza a la implementación de la siguiente funcionalidad.  Un entorno automatizado de pruebas, como el entorno JUnit que soporta pruebas del programa Java (Massol y Husted, 2003), es esencial para TDD. Conforme el código se desarrolla en incrementos muy pequeños, uno tiene la posibilidad de correr cada prueba, cada vez que se adiciona funcionalidad o se refactoriza el programa. Por consiguiente, las pruebas se incrustan en un programa independiente que corre las pruebas y apela al sis-tema que se prueba. Al usar este enfoque, en unos cuantos segundos se efectúan cientos de pruebas independientes. Un argumento consistente con el desarrollo dirigido por pruebas es que ayuda a los programadores a aclarar sus ideas acerca de lo que realmente debe hacer un segmento de código. Para escribir una prueba, es preciso entender lo que se quiere, pues esta com-prensión facilita la escritura del código requerido. Desde luego, si el conocimiento o la comprensión son incompletos, entonces no ayudará el desarrollo dirigido por pruebas. Por ejemplo, si su cálculo implica división, debería comprobar que no divide los núme-ros entre cero. En caso de que olvide escribir una prueba para esto, en el programa nunca se incluirá el código a comprobar. Además de la mejor comprensión del problema, otros beneficios del desarrollo diri-gido por pruebas son: 1. Cobertura de código En principio, cualquier segmento de código que escriba debe  tener al menos una prueba asociada. Por lo tanto, puede estar seguro de que cual-Identificar la nueva funcionalidad Escribir la prueba Correr la pruebaImplementar la funcionalidad y refactorizaciónFallaPasa Figura 8.9 Desarrollo  dirigido por pruebas M08_SOMMERVILLE_INGENIERIA_1ED_SE_205-233.indd   222M08_SOMMERVILLE_INGENIERIA_1ED_SE_205-233.indd   222 3/18/11   5:40:00 PM3/18/11   5:40:00 PM