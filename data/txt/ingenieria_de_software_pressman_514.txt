CAPÍTULO 21  MODELADO Y VERIFICACIÓN FORMAL 483 donde g es una subfunción que se liga a un estado específico t. Cuando se consideran de manera  colectiva, los pares de subfunción de estado (t, g) definen la función f de la caja negra. 21.2.3  Especificación de caja clara La especificación de caja clara está cercanamente alineada con el diseño procedural y con la  programación estructurada. En esencia, la subfunción g dentro de la caja de estado se sustituye con los constructos de programación estructurada que implementan g. Como ejemplo, considere la caja clara que se muestra en la figura 21.5. La caja negra g, que  se muestra en la figura 21.3, se sustituye por un constructo secuencia que incorpora un condi-cional. Éste, a su vez, puede refinarse en las cajas claras de nivel inferior conforme avanza el refinamiento por pasos. Es importante observar que puede probarse que la especificación descrita en la jerarquía de  caja clara es correcta. Este tema se considera en la sección 21.3.  21.3 D ISEÑO  DE CUARTO  LIMPIO La ingeniería del software de cuarto limpio utiliza mucho la filosofía de programación estructu-rada (capítulo 10). Pero, en este caso, la programación estructurada se aplica de manera mucho más rigurosa. Las funciones de procesamiento básico (descritas durante los primeros refinamientos de la  especificación) se refinan usando una “expansión en pasos de funciones matemáticas en estruc-turas de conectivos lógicos [por ejemplo, if-then-else] y subfunciones, donde la expansión [se] realiza hasta que todas las subfunciones identificadas puedan enunciarse directamente en el lenguaje de programación utilizado para la implementación” [Dye92]. El enfoque de programación estructurada puede usarse de manera efectiva para refinar fun- ciones. Pero ¿qué hay del diseño? Aquí entran en juego algunos conceptos de diseño fundamen-tales (capítulo 8). Los datos de programa se encapsulan como un conjunto de abstracciones que son atendidas por subfunciones. Los conceptos de encapsulamiento de datos, ocultamiento de información y escritura de datos se usan para crear el diseño de datos. 21.3.1  Refinamiento de diseño Cada especificación de caja clara representa el diseño de un procedimiento (subfunción) reque-rido para lograr una transición de caja de estado. Dentro de la caja clara se usan constructos de programación estructurada y refinamiento por pasos para representar detalles procedurales. Por ejemplo, una función de programa f se refina en una secuencia de subfunciones g y h. Éstas a S RTEstado g11cg1g12 g13FIGURA 21.5 Una  especificación de caja clara 21Pressman(478-500).indd   48321Pressman(478-500).indd   483 19/1/10   12:43:2419/1/10   12:43:24