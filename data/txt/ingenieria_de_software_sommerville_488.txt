17.3 ■ Composición de componentes  471  Otro caso en el que puede usarse un componente adaptador es el de la composición  jerárquica, donde un componente quiere usar otro, pero existe una incompatibilidad entre la interfaz “proporciona” y la interfaz “requiere” de los componentes en la composición. En la figura 17.12 se ilustra el uso de un adaptador que vincula un recolector de datos y un componente sensor. Esto podría usarse en la implementación de un sistema de esta-ción meteorológica a campo abierto, como se estudió en el capítulo 7. Los componentes sensor y recolector de datos se componen usando un adaptador que reconcilia la interfaz “requiere” del componente de recolección de datos con la interfaz “proporciona” del componente sensor. El componente recolector de datos se diseñó con una interfaz “requiere” genérica que brinda soporte a la recolección de datos del sensor y la gestión del sensor. Para cada una de dichas operaciones, el pará-metro es una cadena de texto que representa los comandos de sensor específicos. Por ejemplo, para emitir un comando de recolección (collect), diría  sensorData (“collect”).  Como se muestra en la figura 17.12, el sensor en sí tiene operaciones separadas como start, stop y getdata. El adaptador analiza gramaticalmente la cadena de entrada, identifica el comando (por ejemplo, collect) y luego llama a  Sensor.getdata  para recolectar el valor del sensor.  Luego, regresa el resultado (como una cadena de caracteres) al componente recolector de datos. Este estilo de interfaz significa que el recolector de datos puede interactuar con diferentes tipos de sensor. Un adaptador separado, que convierte los comandos del sensor de  Recolector de datos  a la interfaz de sensor real, se implementa para cada tipo  de sensor. El análisis anterior de composición supone que usted puede decir, a partir de la docu-mentación del componente, si las interfaces son compatibles o no. Desde luego, la defi-nición de interfaz incluye el nombre de la operación y los tipos de parámetro, de manera que se puede hacer cierta valoración de la compatibilidad a partir de esto. Sin embargo, usted depende de la documentación del componente para decidir si las interfaces son semánticamente compatibles. Para ilustrar este problema, considere la composición que se ilustra en la figura 17.13. Dichos componentes se usan para implementar un sistema que descargue imá-genes de una cámara digital y las almacene en una fototeca. El usuario del sistema puede dar información adicional para describir y catalogar la fotografía. Para evitar confu-sión, aquí no se muestran todos los métodos de interfaz. En vez de ello, simplemente se addSensor removeSensorstartSensorstopSensortestSensor listAllreportinitializesensorManagement sensorDataAdaptador Sensorstart getdatastopRecolector de datos Figura 17.12  Adaptador que vincula un recolector de datos y un sensor M17_SOMMERVILLE_INGENIERIA_1ED_SE_452-478.indd   471M17_SOMMERVILLE_INGENIERIA_1ED_SE_452-478.indd   471 3/18/11   5:03:06 PM3/18/11   5:03:06 PM