handle(e); } } } private void handle(exception e) { if (!(e instanceof socketexception)) { e.printstacktrace(); } } public void stopprocessing() { keepprocessing = false; closeignoringexception(serversocket); } void process(socket socket) { if (socket == null) return; try { system.out.printf(“server: getting message\n”); string message = messageutils.getmessage(socket); system.out.printf(“server: got message: %s\n”, message); thread.sleep(1000); system.out.printf(“server: sending reply: %s\n”, message); messageutils.sendmessage(socket, “processed: ” + message); system.out.printf(“server: sent\n”); closeignoringexception(socket); } catch (exception e) { e.printstacktrace(); } } private void closeignoringexception(socket socket) { if (socket != null) try { socket.close(); } catch (ioexception ignore) { } } private void closeignoringexception(serversocket serversocket) { if (serversocket != null) try { serversocket.close(); } catch (ioexception ignore) { } } } listado a-5 435