wikipage suiteteardown = pagecrawlerimpl.getinheritedpage( suiteresponder.suite_teardown_name, wikipage ); if (suiteteardown != null) { wikipagepath pagepath = suiteteardown.getpagecrawler().getfullpath (suiteteardown); string pagepathname = pathparser.render(pagepath); buffer.append(“!include -teardown .”) .append(pagepathname) .append(“\n”); } } } pagedata.setcontent(buffer.tostring()); return pagedata.gethtml(); } ¿tras tres minutos entiende la función? seguramente no. pasan demasiadas cosas y hay demasiados niveles de abstracción diferentes. hay cadenas extrañas e invocaciones de funciones mezcladas en instrucciones if doblemente anidadas controladas por indicadores. sin embargo, con sencillas extracciones de código, algún cambio de nombres y cierta reestructuración, pude capturar la intención de la función en las nueve líneas del listado 3-2. compruebe si ahora la entiende. listado 3-2 htmlutil.java (refactorización). public static string renderpagewithsetupsandteardowns( pagedata pagedata, boolean issuite ) throws exception { boolean istestpage = pagedata.hasattribute(“test”); if (istestpage) { wikipage testpage = pagedata.getwikipage(); stringbuffer newpagecontent = new stringbuffer(); includesetuppages (testpage, newpagecontent, issuite); newpagecontent.append(pagedata.getcontent()); includeteardownpages(testpage, newpagecontent, issuite); pagedata.setcontent(newpagecontent.tostring()); } return pagedata.gethtml(); } a menos que sea un alumno de fitnesse, seguramente no entienda los 62