Separar Main Una forma de separar la construcción del uso consiste en trasladar todos los aspectos de la construcción a  main  o a módulos invocados por  main , y diseñar el resto del sistema suponiendo que todos los objetos se han creado y conectado correctamente (véase la figura 11.1). El flujo de control es fácil de seguir. La función  main  crea los objetos necesarios para el sistema, los pasa a la aplicación y ésta los utiliza. Verá que las flechas de dependencia atraviesan la barrera entre  main  y la aplicación. Todas van en la misma dirección, alejándose de  main , lo que significa que la aplicación no tiene conocimiento de  main  ni del proceso de construcción. Simplemente espera que todo se haya construido correctamente. Figura 11.1. Separación de la construcción en  main() . Factorías En ocasiones, la aplicación tendrá que ser responsable de la creación de un objeto. Por ejemplo, en un sistema de procesamiento de pedidos, la aplicación debe crear las instancias  LineItem  que añadir a  Order . En este caso, podemos usar el patrón de factoría abstracta [51]  para que la aplicación controle cuándo crear  LineItem , pero mantener los detalles de dicha construcción separados del código de la aplicación (véase la figura 11.2). 209