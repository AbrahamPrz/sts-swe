podemos crear una prueba que espere un valor de cartera total de 500 dólares: public class portfoliotest { private fixedstockexchangestub exchange; private portfolio portfolio; @before protected void setup() throws exception { exchange = new fixedstockexchangestub(); exchange.fix(“msft”, 100); portfolio = new portfolio(exchange); } @test public void givenfivemsfttotalshouldbe500() throws exception { portfolio.add(5, “msft”); assert.assertequals(500, portfolio.value()); } } si diseccionamos un sistema para poder probarlo de esta forma, resultará más flexible y se podrá reutilizar. la ausencia de conexiones significa que los elementos del sistema se aíslan entre ellos y de otros cambios. este aislamiento hace que comprendamos mejor los elementos del sistema. al minimizar las conexiones de esta forma, nuestras clases cumplen otro principio de diseño: dependency inversion principle (dip) o principio de inversión de dependencias [49] . básicamente afirma que nuestras clases deben depender de abstracciones, no de detalles concretos. en lugar de depender de los detalles de implementación de la clase tokyostockexchange , nuestra clase portfolio depende de la interfaz stockexchange , que representa el concepto abstracto de solicitar el precio actual de una acción. esta abstracción aísla todos los datos concretos de la obtención de dicho precio, incluyendo de dónde se obtiene. bibliografía [rdd] : object design: roles, responsibilities, and collaborations , rebecca wirfs-brock et al., addison-wesley, 2002. [ppp] : agile software development: principles, patterns, and practices , robert c. martin, prentice hall, 2002. 203