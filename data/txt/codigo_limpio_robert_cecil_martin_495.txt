476 daysToEndOfPrecedingMonth 477 = LEAP_YEAR_AGGREGATE_DAYS_TO_END_OF_PRECEDING_MONTH; 478 } 479 480 // get the month from the serial date 481 int mm = 1; 482 int sss = ss2 + daysToEndOfPrecedingMonth[mm] - 1; 483 while (sss < this.serial) { 484 mm = mm + 1; 485 sss = ss2 + daysToEndOfPrecedingMonth[mm] - 1; 486 } 487 this.month = mm - 1; 488 489 // el resto es d(+1); 490 this.day = this.serial - ss2 491 - daysToEndOfPrecedingMonth[this.month] + 1; 492 493 } 494 495 } Listado B-6 RelativeDayOfWeekRule.java 1 /* ============================================================= 2 * JCommon : biblioteca gratuita de clases de propósito general para Java(tm) 3 * ============================================================= 4 * 5 * (C) Copyright 2000-2005, de Object Refinery Limited y colaboradores. 6 * 7 * Información del proyecto: http://www.jfree.org/jcommon/index.html 8 * 9 * Esta biblioteca es software gratuito; puede distribuirla y/o modificarla 10 * bajo las condiciones de la Licencia pública general GNU publicada por 11 * la Free Software Foundation; ya sea la versión 2.1 de la licencia, u 12 * otra versión posterior (de su elección). 13 * 14 * Esta biblioteca se distribuye con la intención de que sea útil, pero 15 * SIN GARANTÍA ALGUNA, incluida la garantía implícita de COMERCIABILIDAD 16 * e IDONEIDAD PARA UN DETERMINADO FIN. Consulte la Licencia pública general GNU 17 * si necesita más información al respecto. 18 * 496