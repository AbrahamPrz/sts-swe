de una a casi tres páginas. Este aumento se debe a varios motivos. En primer lugar, el programa refactorizado usa nombres de variable más extensos y descriptivos. Por otra parte, usa declaraciones de funciones y clases como comentarios del código. Por último, usamos espacios en blanco y técnicas de formato para mantener la legibilidad. El programa se ha dividido en tres responsabilidades principales. La parte principal se incluye en la clase  PrimePrinter , responsable de controlar el entorno de ejecución. Cambia si se modifica el método de invocación. Por ejemplo, si este programa se convierte en un servicio SOA, es la clase que se verá afectada. RowColumnPagePrinter  sabe cómo aplicar formato a una lista de números con una determinada cantidad de filas y columnas. Si es necesario cambiar el formato del resultado, es la clase que se verá afectada. La clase  PrimeGenerator  sabe cómo generar una lista de números primos. No se creará una instancia como objeto. La clase es sólo un ámbito útil en el que declarar y ocultar sus variables. Esta clase cambia si se modifica el algoritmo para calcular números primos. No hemos reescrito el programa. No hemos empezado de cero y los hemos vuelto a diseñar. En realidad, si se fija atentamente en los dos programas, verá que usan los mismos algoritmos y mecanismos. El cambio se ha realizado creando una  suite  de pruebas que verifican el comportamiento preciso del primer programa. Tras ello, se aplican numerosos cambios mínimos, de uno en uno. Tras cada cambio, se ejecuta el programa para garantizar que el comportamiento no varía. Paso a paso, el primer programa se limpia y se transforma en el segundo. Organizar los cambios En muchos sistemas, el cambio es continuo. Cada cambio supone un riesgo de que el resto del sistema no funcione de la forma esperada. En un sistema limpio organizamos las clases para reducir los riesgos de los cambios. La clase  Sql  del Listado 10-9 se usa para generar cadenas SQL de forma correcta con los metadatos adecuados. Es un trabajo continuo y, como tal, no 198